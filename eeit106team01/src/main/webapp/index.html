<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>首頁</title>

    <link rel="icon" href="/assets/images/favicon.ico">

    <script src="/assets/js/jquery-1.11.3.min.js"></script>

    <!--input data-include property in any tag when window.onload-->
    <script src="/navbar/js/csi.min.js"></script>

    <!-- include navbarCss when window.onload-->
    <div data-include="/navbar/navbarCssInHeadTag.html"></div>

    <!-- chatroom -->
    <script src="/chat/js/sockjs.min.js"></script>
    <script src="/chat/js/stomp.min.js"></script>
    <script src="/chat/js/chatroom-init.js"></script>

    <!-- Main Quill library -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.7.1/katex.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
    <script src="/forum/quill/quill.js"></script>
    <script src="/forum/quill/quill.min.js"></script>
    <!-- plyr -->
    <link rel="stylesheet" href="https://cdn.plyr.io/3.5.3/plyr.css" />
    <script src="https://cdn.plyr.io/3.5.3/plyr.polyfilled.js"></script>

    <script src="/forum/js/topic/yyyymmddhhiiDate.js"></script>
    <script src="/forum/js/topic/createTopicView.js"></script>


    <link rel="stylesheet" href="/assets/css/font-icons/font-awesome/css/font-awesome.min.css">
    
    <style>
        .main-content * {
            margin: 0px;
            padding: 0px;
        }

        .myTopicList {
            max-width: 1036px;
            margin: auto;
        }
    </style>

    <script>
        $(function () {
            let searchInput = getUrlParameters().q;
            if (searchInput) {
                getSearchResults(searchInput);
            } else {
                getTopicList();
            }
        })

        function getUrlParameters() {
            let parameters = [];
            let hash;
            let hashes = window.location.href.slice(window.location.href.indexOf('?') + 1).split('&');
            for (let i = 0; i < hashes.length; i++) {
                hash = hashes[i].split('=');
                parameters.push(hash[0]);
                parameters[hash[0]] = hash[1];
            }
            return parameters;
        }

        function getSearchResults(searchInput) {
            $.ajax({
                url: "http://localhost:8080/articleTopics/" + searchInput,
                type: "GET",
                success: function (data, textStatus, jqXHR) {
                    if (data.length > 0) {
                        createTopicView(data, "searchTopic");
                    } else {
                        $("#searchTopic").text("查無資料");
                    }
                }
            });
        }

        function getTopicList() {
            let begin = 1;
            let end = 9;
            let orderType = "orderByTime"; //orderByTime orderByLike
            $.each(["requestTopic", "shareTopic"], function (index, value) {
                let topicType = value;
                $.ajax({
                    url: `http://localhost:8080/articleTopics?begin=${begin}&end=${end}&topicType=${topicType}&orderType=${orderType}`,
                    type: "GET",
                    success: function (dataTopicList) {
                        createTopicView(dataTopicList, topicType);
                        $(".plyr video").height("150px");
                        $(".plyr__controls").hide();
                        $(".plyr__control--overlaid").hide();
                    }
                });
            });
        }
        
    </script>
</head>

<body class="page-body" data-url="http://neon.dev">
    <!-- include navbar when window.onload-->
    <div data-include="/navbar/navbarWhite.html"></div>

    <div class="page-container">
        <div class="main-content">

            <div class="myTopicList">
                <h1>協尋文</h1>
                <div class="col-md-12" id="requestTopic"></div>
                <hr>
                <h1>分享文</h1>
                <div class="col-md-12" id="shareTopic"></div>
                <hr>
                <h1>搜尋結果</h1>
                <div class="col-md-12" id="searchTopic"></div>

                <!-- <div class="col-md-3" style="padding: 8px">
                    <div class="col-md-12" style="height: 150px; margin: 1px;  ">
                        <img height="100%" width="100%" src="navbar/images/1558837130883Indian Parrot Greet Indian Parrot.mp4.jpg">
                    </div>
                    <a href="index.html" id="linkToContent">
                        <div class="col-md-12" id="topicHeaderDiv" style="margin: 1px; text-decoration: underline; font-weight: bolder;">我是好一個很長標題嗎......</div>
                        <div class="col-md-12" style="font-size: 14px; margin: 1px;  ">主要目標是發大財主要目標是發大 ......</div>
                    </a>
                    <div class="col-md-12" id="memberNameDiv" style="font-size: 14px; margin: 1px; color: #0066CC;">
                        <img src="/navbar/images/wowlogo.png" alt="" class="img-circle" width="34" />&nbsp;John Henderson</div>
                    <div class="col-md-2" style="font-size: 14px; margin: 1px; width: 45px;">
                        <i class="fa fa-thumbs-o-up"></i>&nbsp;1</div>
                    <div class="col-md-2" style="font-size: 14px; margin: 1px; width: 45px;">
                        <i class="fa fa-commenting-o"></i>&nbsp;322</div>
                    <div class="col-md-2" style="font-size: 14px; margin: 1px; width: 45px;">
                        <i class="fa fa-eye"></i>&nbsp;225</div>
                    <div class="col-md-6" style="float: right; text-align: right; font-size: 14px; margin: 1px; width: 95px;">
                        <i class="fa fa-video-camera"></i>&nbsp;2019-05-06</div>
                </div> -->

            </div>


        </div>

    </div>




    <!-- JavaScripts initializations and stuff -->
    <!-- YW: this is important for navbar -->
    <script src="/assets/js/neon-custom.js"></script>

    <!-- Bottom scripts (common) -->
    <script src="/assets/js/gsap/TweenMax.min.js"></script>
    <script src="/assets/js/jquery-ui/js/jquery-ui-1.10.3.minimal.min.js"></script>
    <script src="/assets/js/bootstrap.js"></script>
    <script src="/assets/js/joinable.js"></script>
    <script src="/assets/js/resizeable.js"></script>
    <script src="/assets/js/neon-api.js"></script>

    <!-- Imported scripts on this page -->
    <!-- <script src="/assets/js/neon-chat.js"></script> -->

    <!-- Demo Settings -->
    <!-- <script src="/assets/js/neon-demo.js"></script> -->

</body>

</html>