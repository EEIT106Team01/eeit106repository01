<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>主題</title>
    <link rel="stylesheet"
        href="https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">
    <script
        src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.0/jquery.min.js"></script>
    <script
        src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"></script>
    <script
        src="https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>
    
    <script src="https://code.jquery.com/jquery-1.12.4.min.js" integrity="sha256-ZosEbRLbNQzLpnKIkEdrPv7lOy9C27hHQ+Xp8a4MxAQ="
        crossorigin="anonymous"></script>
    <script>
        $(function () {
            getTopicList();
        })

        let urlGetTopicByLastRange = getUrlGetTopicByLastRange(1, 9, "orderByTime"); //orderByTime orderByLike
        let urlGetTopicByCoordinateRange = getUrlGetTopicByCoordinateRange(5.1, 20.1, 125.1, 130.1);
        
        function getUrlGetTopicByLastRange(begin, end, orderType){
            return `http://localhost:8080/articleTopics?begin=${begin}&end=${end}&orderType=${orderType}`;
        }

        function getUrlGetTopicByCoordinateRange(lowerLatitude, upperLatitude, lowerLongitude, upperLongitude){
            return `http://localhost:8080/articleTopics?lowerLatitude=${lowerLatitude}&upperLatitude=${upperLatitude}&lowerLongitude=${lowerLongitude}&upperLongitude=${upperLongitude}`;
        }

        function getTopicList() {
            $.ajax({
                url: urlGetTopicByLastRange,
                type: "GET",
                success: function (dataTopicList) {
                    createTopicView(dataTopicList);
                }
            })
        }

        function createTopicView(dataTopicList) {
            $("#search").text("");
            let divCardDeck;
            for (let i = 0; i < dataTopicList.length; i++) {
                if(( i + 1 ) % 3 == 1){
                    divCardDeck = $("<div></div>").addClass("card-deck").width("900px").appendTo($("#search"));
                }
                let divCard = $("<div></div>").addClass("card").appendTo(divCardDeck);
                    let imgBloodTrial = $('<img />',
                                { class: 'card-img-topMyid',
                                src: '../images/bloodtrial.jpg',
                                width: '100%'
                                }).appendTo(divCard);
                    let divCardBody = $("<div></div>").addClass("card-body").appendTo(divCard);
                        let h4TopicHeader = $("<h4></h4>").addClass("card-title").text(dataTopicList[i].topicHeader).appendTo(divCardBody);
                        let pTopicContent = $("<p></p>").addClass("card-text").text(dataTopicList[i].topicContent).appendTo(divCardBody);
                            let aLinkToContent = $("<a></a>").addClass("card-link").attr("href", "#").text("<詳細內容>").appendTo(pTopicContent);
                        let pMemberName = $("<p></p>").addClass("card-text").text("Fadachai").appendTo(divCardBody);
                        let spanPageViews = $("<span></span>").addClass("badge badge-dark").text(dataTopicList[i].pageViews).appendTo(divCardBody);
                        let spanTopicLikeNum = $("<span></span>").addClass("badge badge-dark").text(dataTopicList[i].topicLikeNum).appendTo(divCardBody);
                        let spanContentReplyNum = $("<span></span>").addClass("badge badge-dark").text(dataTopicList[i].contentReplyNum).appendTo(divCardBody);
                        let spanAccidentTime = $("<span></span>").addClass("badge badge-warning").text(dataTopicList[i].accidentTime).appendTo(divCardBody);
            }
        }
    </script>
</head>

<body>
    <!-- <input type="button" value="testButton" onclick="createTopicView('body')"> -->
    <div class="spinner-border">123</div>
    <div id="search"></div>

    <div id="share">
        <div class="card-deck" style="width:900px;">
            <div class="card">
                <img class="card-img-top" src="../images/bloodtrial.jpg" alt="Card image" style="width:100%">
                <div class="card-body">
                    <h4 class="card-title">三寶上路囉 碰碰碰</h4>
                    <p class="card-text">發大財高雄發大財大發財發大財高雄發大財大發財......
                        <a href="#" class="card-link">&lt;詳細內容&gt;</a>
                    </p>
                    <p class="card-text">Fadachai</p>
                    <span class="badge badge-dark">153</span>
                    <span class="badge badge-dark">1</span>
                    <span class="badge badge-dark">5</span>
                    <span class="badge badge-warning">2019-05-16</span>
                </div>
            </div>
            
            <div class="card">
                <img class="card-img-top" src="../images/bloodtrial.jpg" alt="Card image" style="width:100%">
                <div class="card-body">
                    <h4 class="card-title">三寶上路囉 碰碰碰</h4>
                    <p class="card-text">發大財高雄發大財大發財發大財高雄發大財大發財......
                        <a href="#" class="card-link">&lt;詳細內容&gt;</a>
                    </p>
                    <p class="card-text">Fadachai</p>
                    <span class="badge badge-dark">153</span>
                    <span class="badge badge-dark">1</span>
                    <span class="badge badge-dark">5</span>
                    <span class="badge badge-warning">2019-05-16</span>
                </div>
            </div>

            <div class="card">
                <img class="card-img-top" src="../images/bloodtrial.jpg" alt="Card image" style="width:100%">
                <div class="card-body">
                    <h4 class="card-title">三寶上路囉 碰碰碰</h4>
                    <p class="card-text">發大財高雄發大財大發財發大財高雄發大財大發財......
                        <a href="#" class="card-link">&lt;詳細內容&gt;</a>
                    </p>
                    <p class="card-text">Fadachai</p>
                    <span class="badge badge-dark">153</span>
                    <span class="badge badge-dark">1</span>
                    <span class="badge badge-dark">5</span>
                    <span class="badge badge-warning">2019-05-16</span>
                </div>
            </div>

        </div>

    </div>


    
</body>

</html>