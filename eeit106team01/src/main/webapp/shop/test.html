<!DOCTYPE html>
<html lang="en">

<head>
    <title>test</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.0/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/js-cookie@2/src/js.cookie.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>
</head>

<body>
    <div id="search"></div>


    <div>
        <form id="getIdForm">
            <h1>搜尋產品ID</h1>
            <input type="button" value="getId" id="getIdButton">
            <p>ID :
                <input type="text" name="id" id="productId">
            </p>
        </form>
    </div>
    <br>
    <div>
        <form id="getTypeForm" method="get">
            <h1>搜尋產品Type</h1>
            <input type="button" value="getType" id="getTypeButton">
            <p>type :
                <input type="text" name="type" id="productType">
            </p>
        </form>
    </div>
    <br>
    <div>
        <form id="getUpdatedTimeForm" method="get">
            <h1>搜尋產品更新時間</h1>
            <input type="button" value="getUpdatedTime" id="getUpdatedTimeButton">
            <p>day :
                <input type="radio" name="day" id="productUpdatedTime" value="-30">
                <label for="-30">30天內</label>
                <input type="radio" name="day" id="productUpdatedTime" value="-7">
                <label for="-7">7天內</label>
            </p>
        </form>
    </div>
    <br>
    <div>
        <form id="getPriceForm" method="get">
            <h1>用價錢搜尋</h1>
            <input type="button" value="getPrice" id="getPriceButton">
            <p>最低價錢:
                <input type="text" name="minPrice" id="productMinPrice">
            </p>
            <p>最高價錢:
                <input type="text" name="maxPrice" id="productMaxPrice">
            </p>
        </form>
    </div>
    <div>
        <form id="getNameForm" method="get">
            <h1>品名搜尋</h1>
            <input type="button" value="getName" id="getNameButton">
            <p>name:
                <input type="text" name="name" id="productName">
            </p>
        </form>
    </div>
    <br>
    <div>
        <form id="getBrandForm" method="get">
            <h1>品牌搜尋</h1>
            <input type="button" value="getBrand" id="getBrandButton">
            <p>name:
                <input type="text" name="brand" id="productBrand">
            </p>
        </form>
    </div>
    <div>
        <form id="getTotalSoldForm" method="get">
            <h1>銷售排行</h1>
            <input type="button" value="getTotalSold" id="getTotalSoldButton">
            <p>前
                <input type="text" name="top" id="productTotalSold">
            </p>
        </form>
    </div>
    <div>
        <form id="getStatusForm" method="get">
            <h1>產品狀態</h1>
            <input type="button" value="getStatus" id="getStatusButton">
            <p>status:
                <input type="text" name="status" id="productStatus">
            </p>
            <p>id:
                <input type="text" name="id" id="productStatusId">
            </p>
        </form>
    </div>
    <br>
    <div>
        <form id="insertForm" method="POST">
            <h1>新增產品</h1>
            <input type="button" value="Insert" id="insertButton">
            <p>name :
                <input type="text" name="name" id="insertProductName">
            </p>
            <p>brand :
                <input type="text" name="brand" id="insertProductBrand">
            </p>
            <p>type :
                <input type="text" name="type" id="insertProductType">
            </p>
            <p>price :
                <input type="text" name="price" id="insertProductPrice">
            </p>
            <p>stock :
                <input type="text" name="stock" id="insertProductStock">
            </p>
            <p>description :
                <input type="text" name="description" id="insertProductDescription">
            </p>
            <p>imageLink :
                <input type="text" name="imageLink" id="insertProductImageLink">
            </p>
        </form>
    </div>
    <br>
    <div>
        <form id="updateForm" method="POST">
            <h1>更新產品資訊</h1>
            <input type="button" value="update" id="updateButton">
            <p>ID :
                <input type="text" name="id" id="updateProductId">
            </p>
            <p>name :
                <input type="text" name="name" id="updateProductName">
            </p>
            <p>type :
                <input type="text" name="type" id="updateProductType">
            </p>
            <p>price :
                <input type="text" name="price" id="updateProductPrice">
            </p>
            <p>stock :
                <input type="text" name="stock" id="updateProductStock">
            </p>
            <p>description :
                <input type="text" name="description" id="updateProductDescription">
            </p>
            <p>imageLink :
                <input type="text" name="imageLink" id="updateProductImageLink">
            </p>
            <p>brand :
                <input type="text" name="brand" id="updateProductBrand">
            </p>
        </form>
    </div>
    <br>

</body>
<script>

    $(document).ready(function () {
        $("#getIdButton").click(function () {
            getProduct();
        });
        $("#getTypeButton").click(function () {
            getProductByTpye();
        });
        $("#getUpdatedTimeButton").click(function () {
            getProductByUpdatedTime();
        });
        $("#getPriceButton").click(function () {
            getProductByPrice();
        });
        $("#getBrandButton").click(function () {
            getProductsByBrand();
        });
        $("#getNameButton").click(function () {
            getProductsByName();
        });
        $("#getTotalSoldButton").click(function () {
            getProductsByTotalSold();
        });
        $("#getStatusButton").click(function () {
            getProductsByStatus();
        });
        
        $("#insertButton").click(function () {
            postProduct();
        });
        $("#updateButton").click(function () {
            updateProduct();
        });


    });

    function getProduct() {
        var id = $("#productId").val();
        alert("id=" + id)
        // $.ajax({
        //     url: "http://localhost:8080/product/" + id,
        //     method: "GET",
        //     dataType: "json",
        //     success: function (resutl) {
        //         alert(resutl);
        //     },
        // error: function (jqXHR, textStatus, errorThrown) {
        // 		console.log(textStatus);
        // 	}
        // })

        $.getJSON("http://localhost:8080/product/" + id, function (data) {
            var items = [];
            $.each(data, function (key, val) {
                items.push("<li id='" + key + "'>" + val + "</li>");
            });

            $("<ul/>", {
                "class": "my-new-list",
                html: items.join("")
            }).appendTo("body");
            var NumOfJData = data.length;
            alert(NumOfJData)
        });
    }

    function getProductByTpye() {
        var type = $("#getTypeForm").serialize()
        $.ajax({
            url: "http://localhost:8080/products/type?" + type,
            method: "GET",
            dataType: "json",
            success: function () {
                alert("成功")
            },
            error: function (jqXHR, textStatus, errorThrown) {
                console.log(textStatus);
            }
        })
    }

    function getProductByUpdatedTime() {
        var updatedTime = $("#getUpdatedTimeForm").serialize()
        $.ajax({
            url: "http://localhost:8080/products/updatedTime?" + updatedTime,
            method: "GET",
            dataType: "json",
            success: function () {
                alert("成功")
            },
            error: function (jqXHR, textStatus, errorThrown) {
                console.log(textStatus);
            }
        })
    }

    function getProductByPrice() {
        var price = $("#getPriceForm").serialize()
        $.ajax({
            url: "http://localhost:8080/products/price?" + price,
            method: "GET",
            dataType: "json",
            success: function () {
                alert("成功")
            },
            error: function (jqXHR, textStatus, errorThrown) {
                console.log(textStatus);
            }
        })
    }

    function getProductsByName() {
        var name = $("#getNameForm").serialize()
        $.ajax({
            url: "http://localhost:8080/products/name?" + name,
            method: "GET",
            dataType: "json",
            success: function () {
                alert("成功")
            },
            error: function (jqXHR, textStatus, errorThrown) {
                console.log(textStatus);
            }
        })
    }

    function getProductsByBrand() {
        var brand = $("#getBrandForm").serialize();
        $.ajax({
            url: "http://localhost:8080/products/brand?" + brand,
            method: "GET",
            dataType: "json",
            success: function () {
                alert("成功")
            },
            error: function (jqXHR, textStatus, errorThrown) {
                console.log(textStatus);
            }
        })
    }

    function getProductsByTotalSold() {
        var totalSold = $("#getTotalSoldForm").serialize();
        alert($("#getTotalSoldForm").serialize());
        $.ajax({
            url: "http://localhost:8080/products/totalSold?" + totalSoldF,
            method: "GET",
            dataType: "json",
            success: function () {
                alert("成功")
            },
            error: function (jqXHR, textStatus, errorThrown) {
                console.log(textStatus);
            }
        })
    }

    function getProductsByStatus(){
        var status = $("#getStatusForm").serialize();
        $.ajax({
            url: "http://localhost:8080/products/status?" + status,
            method: "GET",
            dataType: "json",
            success: function () {
                alert("成功")
            },
            error: function (jqXHR, textStatus, errorThrown) {
                console.log(textStatus);
            }
        })
    }

    function postProduct() {
        var insertData = {
            "brand": $("#insertProductBrand").val(),
            "description": $("#insertProductDescription").val(),
            "imageLink": $("#insertProductImageLink").val(),
            "name": $("#insertProductName").val(),
            "price": $("#insertProductPrice").val(),
            "stock": $("#insertProductStock").val(),
            "type": $("#insertProductType").val(),
        }
        $.ajax({
            url: "http://localhost:8080/products/insert",
            method: "POST",
            dataType: "json",
            data: insertData,
            contentType: "application/json; charset=UTF-8",
            success: function () {
                alert("成功");
            },
            error: function (jqXHR, textStatus, errorThrown) {
                console.log(textStatus);
            }
        })
    }

    function updateProduct() {
        var updateData = {
            "id": $("#updateProductId").val(),
            "brand": $("#updateProductBrand").val(),
            "description": $("#updateProductDescription").val(),
            "imageLink": $("#updateProductImageLink").val(),
            "name": $("#updateProductName").val(),
            "price": $("#updateProductPrice").val(),
            "stock": $("#updateProductStock").val(),
            "type": $("#updateProductType").val(),
        }
        $.ajax({
            url: "http://localhost:8080/products",
            method: "POST",
            dataType: "json",
            data: updateData,
            contentType: "application/json; charset=UTF-8",
            success: function () {
                alert("成功");
            },
            error: function (jqXHR, textStatus, errorThrown) {
                console.log(textStatus);
            }
        })
    }
</script>

</html>